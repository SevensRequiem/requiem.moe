function deleteMessage(event,id){event.preventDefault();const form=document.getElementById(`delete-${id}`);const url=form.getAttribute('action');const csrftoken=form.querySelector('input[name="csrftoken"]').value;const sendtoken=form.querySelector('input[name="sendtoken"]').value;const timetoken=form.querySelector('input[name="timetoken"]').value;const userid=form.querySelector('input[name="userid"]').value;const urlWithParams=`${url}?id=${id}&csrftoken=${csrftoken}&sendtoken=${sendtoken}&timetoken=${timetoken}&userid=${userid}`;const formData=new FormData();formData.append('id',id);formData.append('csrftoken',csrftoken);formData.append('sendtoken',sendtoken);formData.append('timetoken',timetoken);formData.append('userid',userid);fetch(urlWithParams,{method:'POST',body:formData,}).then(response=>{if(!response.ok){throw new Error('Network response was not ok')}
return response.json()}).then(data=>{if(data.success){location.reload()}else{console.error('There was a problem deleting the message:',data.error)}}).catch(error=>{console.error('There was a problem deleting the message:',error)})}